<app-create-post (loadNewData)="loadNewData()" [pageType]="postState"></app-create-post>
<br>

<!-- Modal start -->
<div class="modal fade large" id="postModal" aria-labelledby="postModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">User name</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body custom-scroll">
                <div class="row">
                    <div class="col-lg-7">

                    </div>
                    <div class="col-lg-4"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal end -->






<!-- share box end -->
<div class="box-placeholder" style="width: 100%; margin: auto;"
    [@loadingPlaceholder]="showPlaceholder ? 'close':'open'">
    <div class="p-4">
        <span class="category text link"></span>
        <h4 class="text line"></h4>
        <h4 class="text"></h4>
    </div>
    <hr>
    <div class="image">
        <div class="embed-responsive embed-responsive-16by9"></div>
    </div>
    <hr>
    <div class="excerpt p-4">
        <div class="text line"></div>
        <div class="text line"></div>
        <div class="text"></div>
    </div>
</div>

<div>
    <!-- post status start -->
    <div *ngFor="let p of post ">
        <div class="card">
            <!-- post title start -->
            <div class="post-title d-flex align-items-center">
                <!-- profile picture end -->
                <div class="profile-thumb">
                    <a href="#">
                        <figure class="profile-thumb-middle">
                            <div *ngIf="p.userDetail[0].profilePicture; then thenBlock else elseBlock"></div>
                            <ng-template #thenBlock><img
                                    src="http://localhost:3000/download?imagename={{p.userDetail[0].profilePicture}}"
                                    alt="profile picture"></ng-template>
                            <ng-template #elseBlock> <img src="assets/images/profile/profile-small-3.jpg"
                                    alt="profile picture">
                            </ng-template>

                            <ng-template #placeholder>
                            </ng-template>
                        </figure>
                    </a>
                </div>
                <!-- profile picture end -->
                <div class="posted-author">
                    <h6 class="author"><a href="profile.html">{{p.userDetail[0].username}}</a></h6>
                    <span class="post-time">{{p.createdDate| dateAgo}}</span>
                </div>

                <div class="post-settings-bar">
                    <span></span>
                    <span></span>
                    <span></span>
                    <div class="post-settings arrow-shape">
                        <ul>
                            <li><button>copy link to adda</button></li>

                            <li *ngIf="p.user==userId"  (click)="setPostId(p._id)" data-toggle="modal" data-target="#editPost" ><button>edit post</button></li>
                            <li *ngIf="p.user==userId"  (click)="deletePost(p._id)" ><button>Delete Post</button></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- post title start -->
            <div class="post-content">
                <p class="post-desc">
                    {{p.content}}
                </p>
                <div class="post-thumb-gallery img-gallery">
                    <div class="row no-gutters">

                
                        <div *ngIf="p.imageLink!='' && p.imageLink!=null" class="col-12">

                            <figure class="post-thumb" (click)="showPostModal()">
                                <a class="gallery-selector" href="assets/images/post/post-large-2.jpg">
                                    <img *ngIf="p.imageLink!=[]" src='http://localhost:3000/download?imagename={{p.imageLink[0]}}'
                                        alt="post image">
                                </a>
                            </figure>

                        </div>
                    </div>
                </div>
                <div class="post-meta">
                    <button class="post-meta-like">
                        <i class="bi bi-heart-beat"></i>
                        <span *ngIf="likeFilter(p.likes,p.user._id)">You and</span>
                        <span>{{ p.likes ? p.likes.length : '0' }} people like this</span>
                        <strong>207</strong>
                    </button>
                    <ul class="comment-share-meta">
                        <li>
                            <button class="post-comment">
                                <i class="bi bi-chat-bubble"></i>
                                <span>41</span>
                            </button>
                        </li>
                        <li>
                            <button class="post-share">
                                <i class="bi bi-share"></i>
                                <span>07</span>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>


    <!-- post status end -->
    <button type="button" (click)="loadMore()"> Load more ...</button>

    <div  class="modal fade" id="editPost">
        <app-edit-post (loadNewData)="loadNewData()"  [postId]="postId"></app-edit-post>
    </div>
   
</div>